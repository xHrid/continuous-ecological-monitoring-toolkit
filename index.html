<!DOCTYPE html>
<html>

<head>
    <title>Sanjay Van Monitoring</title>
    <link rel="stylesheet" href="./style.css" />
    <link rel="stylesheet" href="./leaflet/leaflet.css" />
</head>

<body>
    <div id="controls">
        <div id="latlon"><label>Lat Long</label></div>

        <label><input type="radio" name="geojsonOption" value="clear" checked />None</label>
        <label><input type="radio" name="geojsonOption" value="cp2.geojson" />2 Cluster</label>
        <label><input type="radio" name="geojsonOption" value="cp3.geojson" />3 Cluster</label>
        <label><input type="radio" name="geojsonOption" value="cp4.geojson" />4 Cluster</label>
        <!-- Trigger Button -->
        <button id="open-form">Add Spot</button>
        <label class="spot-toggle">
            <input type="checkbox" id="display-spots"> Show Spots
        </label>
        <div class="tracking-controls" style="display: inline;">
            <button id="start-tracking">Start Tracking</button>
            <button id="stop-tracking">Stop Tracking</button>
        </div>

    </div>
    <!-- Simple Popup Form -->
    <div id="popup-form" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <form id="spot-form">
                <input type="text" name="name" placeholder="Spot Name" />
                <input type="text" name="birds" placeholder="Birds Seen" />
                <textarea name="description" placeholder="Description"></textarea>

                <label for="image">Capture Image:</label>
                <input type="file" name="image" accept="image/*" capture="environment" />

                <div id="audio-section">
                    <p>Audio Recording:</p>
                    <button type="button" id="btnStart">Start Recording</button>
                    <button type="button" id="btnStop" disabled>Stop Recording</button>
                    <audio id="audioPlayback" controls></audio>
                </div>



                <button type="submit">Submit</button>
                <button type="button" id="close-form">cancle</button>
            </form>
            <div id="status"></div>

        </div>
    </div>

    <div id="map"></div>

    <div id="spot-details-menu">
        <button id="close-spot-details">x</button>
        <div id="spot-details-content"></div>
    </div>

    <script type="module">
        // Firebase Core
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.8.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.8.0/firebase-analytics.js";

        // Database Services (added these)
        import {
            getFirestore,
            collection,
            addDoc,
            getDocs,
            serverTimestamp
        } from "https://www.gstatic.com/firebasejs/11.8.0/firebase-firestore.js";

        import {
            getStorage,
            ref,
            uploadBytes,
            getDownloadURL
        } from "https://www.gstatic.com/firebasejs/11.8.0/firebase-storage.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDddPHvCMiAZui6RhYkUz69rQ69QS5aLIc",
            authDomain: "mapnotes-c57fd.firebaseapp.com",
            projectId: "mapnotes-c57fd",
            storageBucket: "mapnotes-c57fd.firebasestorage.app",
            messagingSenderId: "552347033390",
            appId: "1:552347033390:web:4e530d192f4c6aa3dfe4bf",
            measurementId: "G-KXQ6JVVPTS"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);

        // Initialize Services (added these)
        const db = getFirestore(app);
        const storage = getStorage(app);

        // Make these available globally (optional but useful)
        window.firebaseServices = {
            db,
            storage,
            serverTimestamp,
            collection,
            addDoc,
            getDocs,
            ref,
            uploadBytes,
            getDownloadURL
        };
    </script>
    <script src="./leaflet/leaflet.js"></script>
    <script src="./map.js"></script>
    <script src="./route.js"></script>
    <script src="./app.js"></script>
    <script src="./spots.js"></script>
</body>

</html>